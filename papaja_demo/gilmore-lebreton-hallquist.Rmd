---
title             : "R you ready for some data?"
shorttitle        : "R you ready"

author: 
  - name          : "Rick O. Gilmore"
    affiliation   : "1,2"
    corresponding : yes    # Define only one corresponding author
    address       : "Department of Psychology, The Pennsylvania State University, University Park, PA 16802 USA"
    email         : "rogilmore@psu.edu"
  - name          : "James LeBreton"
    affiliation   : "1"
  - name          : "Michael Hallquist"
    affiliation   : "1"

affiliation:
  - id            : "1"
    institution   : "The Pennsylvania State University"
  - id            : "2"
    institution   : "Databrary.org"

author_note: |
  The authors are with the Department of Psychology at The Pennsylvania State University.

  The authors acknowledge support from the Department of Psychology and the Social, Life, & Engineering Sciences Imaging Center (SLEIC).

abstract: |
  Want to write a paper using R Markdown? Keep reading to see how.
  
keywords          : "APA, R Markdown"
wordcount         : "Not that many."

bibliography      : ["r-references.bib", "references.bib"]

figsintext        : no
figurelist        : no
tablelist         : no
footnotelist      : no
lineno            : yes

lang              : "english"
class             : "man"
output            : papaja::apa6_pdf
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, error=FALSE)
```

```{r load_packages, include = FALSE}
library("papaja")
library("tidyverse")
```

```{r analysis_preferences}
# Seed for random number generation
set.seed(42)
```

It is possible to write an entire APA-formatted article in R Markdown. 
This very brief paper shows how it might be done.
As illustration, we use the data from a brief, informal survey of participants in the inaugural R Bootcamp at Penn State.
We predicted that higher levels of enthusiams for "Game of Thrones"" would be reported by respondents with *lower* reported hours/day of preferred sleep, at least among younger respondents.

# Methods
Consistent with open and transparent science practices, we report how we determined our sample size, all data exclusions (if any), all manipulations, and all measures in the study. <!-- 21-word solution (Simmons, Nelson & Simonsohn, 2012; retrieved from http://ssrn.com/abstract=2160588) -->

## Participants

We asked participants in an optional "R Bootcamp" held at the Pennsylvania State University Department of Psychology to complete an anonymous survey using a Google Form.
We asked participants to report their age in years.
A total of <!-- add code to compute total number of respondents --> answered the survey with a reported age of <!-- age range -->.

## Material

The survey can be found at this URL: <https://docs.google.com/forms/d/1l5OX8PcN_lfVn3ykr_PtHCzhRbWzMbxhqtgILD45zRg/edit>.
There were five questions asked:

1. Your current level of experience/expertise with R
2. Your enthusiasm for Game of Thrones [1..10 scale]
3. Age in years
4. Preferred number of hours spent sleeping/day
5. Favorite day of the week?
6. Are your data tidy?
    - Yes
    - No

## Procedure

We emailed a link to the survey to the list of participants.
We also include a link to the survey on the web page containing the course schedule (https://psu-psychology.github.io/r-bootcamp/schedule.html).
We encouraged participants to complete the survey after the first day's material.

## Data analysis
We used `r cite_r("r-references.bib")` for all our analyses.
The code used to generate these analyses is embedded in this document.
To view it, see the R Markdown file in the [GitHub repository](http://github.com/psu-psychology/r-bootcamp/papaja-demo/) associated with this paper.

# Results

```{r import-survey}
survey <- read_csv("../data/survey-test.csv")

survey$R_exp <- ordered(survey$R_exp, levels=c("none",
                                               "limited",
                                               "some",
                                               "lots",
                                               "pro"))
```

```{r GoT-by-experience, results="asis"}
descriptives_GoT <- survey %>%
  select(R_exp, GoT) %>%
  group_by(R_exp) %>%
  summarize(
    Mean = mean(GoT)
    , Median = median(GoT)
    , SD = sd(GoT)
    , Min = min(GoT)
    , Max = max(GoT)
  )
descriptives_GoT[, -1] <- printnum(descriptives_GoT[, -1])

apa_table(
  descriptives_GoT
  , caption = "Descriptive statistics of Game of Thrones enthusiasm by R experience."
  , note = "This table was created with apa_table()"
  , escape = TRUE
)
```

```{r fig.cap="Game of Thrones enthusiasm by age and R experience"}
got_vs_r_exp <- survey %>%
  ggplot() +
  aes(x=GoT, y=Age_yrs) +
  facet_grid(. ~ R_exp) +
  geom_point()
got_vs_r_exp
```

To evaluate our core hypothesis that enthusiasm for Game of Thrones would increase as the preferred number of hours of sleep per day decreased, we...

```{r fig.cap="Game of Thrones enthusiasm by preferred hours of sleep"}
got_vs_sleep <- survey %>%
  ggplot() +
  aes(x=Sleep_hrs, y=GoT) +
  geom_point() +
  geom_smooth()
got_vs_sleep
```

# Discussion

These results show how awesome it can be to use R, R Markdown, and literate programming principles to conduct and open, transparent, and reproducible psychological science. Yay, us!

There are no limitations to what we can accomplish using these tools. So, let's get to it.

\newpage

# References

```{r create_r-references}
r_refs(file = "r-references.bib")
```

\setlength{\parindent}{-0.5in}
\setlength{\leftskip}{0.5in}
